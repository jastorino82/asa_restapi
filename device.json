{
  "host": "198.18.133.254",
  "username": "apiuser",
  "password": "C1sco12345",
  "attributes": [
    {
      "name": "Interfaces",
      "description": "ASA interfaces to configure",
      "execute": true,
      "execute_function": "config_interface(payload)",
      "payloads": [
        {
          "hardwareID": "GigabitEthernet0/0",
          "objectId": "GigabitEthernet0_API_SLASH_0",
          "attributes": {
            "kind": "object#GigabitInterface",
            "interfaceDesc": "outside interface",
            "name": "outside",
            "securityLevel": 0,
            "ipAddress": {
              "ip": {
                "kind": "IPv4Address",
                "value": "198.18.5.254"
              },
              "kind": "StaticIP",
              "netMask": {
                "kind": "IPv4NetMask",
                "value": "255.255.255.0"
              }
            },
            "shutdown": false 
          }
        },
        {
          "hardwareID": "GigabitEthernet0/1",
          "objectId": "GigabitEthernet0_API_SLASH_1",
          "attributes": {
            "kind": "object#GigabitInterface",
            "interfaceDesc": "inside interface",
            "name": "inside",
            "securityLevel": 100,
            "ipAddress": {
              "ip": {
                "kind": "IPv4Address",
                "value": "198.18.6.254"
              },
              "kind": "StaticIP",
              "netMask": {
                "kind": "IPv4NetMask",
                "value": "255.255.255.0"
              }
            },
            "shutdown": false 
          }
        }
      ]
    },
    {
      "name": "NTP",
      "description": "NTP servers to configure",
      "execute": true,
      "execute_function": "config_ntp(payload)",
      "payloads": [
        {
          "ipAddress": "198.18.128.1",
	  "isPreferred": true
	},
        {
          "ipAddress": "198.18.133.1",
	  "isPreferred": false 
	}
      ]
    },
    {
      "name": "Enable DNS Lookups",
      "description": "Enable DNS lookups",
      "execute": true,
      "execute_function": "enable_dns(attribute['payload'])",
      "payload": {
        "dnsLookupInterfaces": [
          "outside"
        ]
      }
    },
    {
      "name": "DNS Server Groups",
      "description": "DNS server groups to configure",
      "execute": true,
      "execute_function": "config_dns(payload)",
      "payloads": [
        {
          "objectId": "DefaultDNS",
	  "attributes": {
            "name": "DefaultDNS",
            "dnsServers": [
              {
                "ipAddress": "198.18.128.1",
                "interface": "outside"
              }
            ],
	    "domainName": "dcloud.cisco.com"
          }
	}
      ]
    },
    {
      "name": "RSA Keypair",
      "description": "RSA keypair to configure",
      "execute": true,
      "execute_function": "config_keys(attribute['payload'])",
      "payload": {
        "usage": "General Purpose",
        "kind": "object#Keypair",
        "type": "rsa",
        "name": "mykeypair",
        "size": 2048
      }
    },
    {
      "name": "Identity Certificate",
      "description": "Identity certificate parameters",
      "execute": true,
      "execute_function": "config_cert(attribute['payload'])",
      "payload": {
        "enrollParameters": {
          "includeSerialNumber": false,
          "subjectDN": {
            "c": ["US"],
            "cn": [
              "asa.dcloud.cisco.com"
            ],
            "ea": ["support@dcloud.cisco.com"],
            "l": ["San Jose"],
            "o": ["Cisco Systems"],
            "st": ["CA"],
            "ou": ["dCloud"]
          },
          "ipAddress": "198.18.5.254",
          "fqdn": "asa.dcloud.cisco.com",
          "email": "support@dcloud.cisco.com"
        },
        "kind": "object#IdentityCertificate",
        "name": "my_trustpoint",
        "enableCACheck": true,
        "enableProxyLDCIssuer": false,
        "keyPair": "mykeypair",
        "selfSign": true
      }
    },
    {
      "name": "Static Routes",
      "description": "Static routes to configure",
      "execute": true,
      "execute_function": "config_static_route(payload)",
      "payloads": [
        {      
          "tunneled": false,
          "kind": "object#IPv4Route",
          "distanceMetric": 250,
          "tracked": false,
          "interface": {
            "kind": "objectRef#Interface",
            "name": "outside"
          },
          "gateway": {
            "kind": "IPv4Address",
            "value": "198.18.5.1"
          },
          "network": {
            "kind": "AnyIPAddress",
            "value": "any4"
          }
        }
      ]
    },
    {
      "name": "CLI Commands",
      "description": "CLI commands to push",
      "execute": true,
      "execute_function": "send_cli(payload['payload'])",
      "payloads": [ 
        {  
          "description": "Configure SSL VPN",
          "payload": {
            "commands": [
              "ip local pool POOL-VPN 198.18.10.1-198.18.10.10 mask 255.255.255.0",
	      "access-list ACL-SPLIT-TUNNEL standard permit 198.18.6.0 255.255.255.0",
	      "ssl trust-point my_trustpoint outside",
	      "group-policy GP-RAVPN internal",
              "group-policy GP-RAVPN attributes",
              "vpn-tunnel-protocol ssl-client",
              "split-tunnel-policy tunnelspecified",
              "split-tunnel-network-list value ACL-SPLIT-TUNNEL",
              "address-pools value POOL-VPN",
	      "tunnel-group TG-RAVPN type remote-access",
              "tunnel-group TG-RAVPN general-attributes",
              "default-group-policy GP-RAVPN",
              "tunnel-group TG-RAVPN webvpn-attributes",
              "group-url https://198.18.5.254/ravpn enable",
	      "webvpn",
	      "enable outside",
	      "anyconnect image disk0:/anyconnect-win-4.8.03052-webdeploy-k9.pkg",
	      "anyconnect enable"
            ]
          }
        }
      ]
    }
  ]
}
